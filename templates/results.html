{% extends 'base.html'%}
{% block content %}

<div class="row">
    <h3>Search results for {{search_term}}</h3>
</div>

<div class="headline">
    For your query '{{search_term}}' there have been found {{recipes_count}} recipes.  
</div>


{% for recipe in recipes_by_searchterm %}
<div class="resultsWapper">
    <div class="row">
        <div class="col s6">
            <h4 class="">{{recipe.title}}</h4>
        </div>
        {% if recipe.user_email_hash==session["email_address"] %}
        <div class="col s1"><a href="{{url_for('edit_recipe', recipe_id=recipe._id)}}">Edit</a></div>
        <div class="col s1"><a href="{{url_for('delete_recipe', recipe_id=recipe._id)}}">Delete</a></div>
        {% endif %}
        {% if session["username"]!="" %}
        <div id="showRatePopupBtn">Rate This One!</div>
        {% endif %}
    </div>

    <div class="row">
        <img src="{{recipe.img_src}}" alt="picture_of_dish"></div>
    {% endfor %}

    <div class="headline">
        For your query '{{search_term}}' there have been found {{reviews_count}} reviews.  
    </div>

    {% for review in reviews_by_searchterm %}

    <div class="reviewTile">
        <div class="reviewKey">Review Title</div>
        <div class="reviewValue">{{review.review_title}}</div>
        <div class="reviewKey">Review For</div>
        <div class="reviewValue">
            <a href="{{url_for('read_recipe', recipe_id=review.recipe_id)}}">{{review.review_for}}</a>
        </div>
        <div class="reviewKey">Rating</div>
        <div class="reviewValue">
            {% for star in range(review.rating) %}
            <i class="material-icons prefix">star</i>
            {% endfor %}
        </div>
        <div class="reviewKey">Added on date</div>
        <div class="reviewValue">{{review.added_on_date}}</div>
        <div class="reviewKey">Added on time</div>
        <div class="reviewValue">{{review.added_on_time}}</div>
        <div class="reviewKey">Reviewed By</div>
        <div class="reviewValue">{{review.rated_by}}</div>
        <div class="reviewKey">Comment</div>
        <div class="reviewValue">{{review.comment}}</div>
    </div>
    {% endfor %}
</div>
{% endblock %}